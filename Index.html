<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROJECT GOSHA: LEGENDS</title>
    <link rel="stylesheet" href="style.css" />
    <!-- <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon"> -->
  </head>
  <body>
    <div id="game-container">
      <!-- –§–û–ù -->
      <div id="background"></div>
      <div
        id="click-layer"
        style="position: absolute; inset: 0; z-index: 5"
      ></div>
      <video
        id="bg-video"
        loop
        muted
        style="
          display: none;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          z-index: -1;
        "
      ></video>

      <!-- 1. –î–ò–°–ö–õ–ï–ô–ú–ï–† -->
      <div id="intro-disclaimer" class="intro-screen">
        <div class="disclaimer-content">
          <h1 style="color: #ff3333; margin-bottom: 20px">–í–ù–ò–ú–ê–ù–ò–ï 18+!</h1>
          <p>
            –î–∞–Ω–Ω–∞—è –∏–≥—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ü–µ–Ω—ã –ª—é–±–≤–∏ –∫ –ì–æ—à–µ, <br />—è—Ä–∫–∏–µ –≤—Å–ø—ã—à–∫–∏ –ª—é–≤–±–∏ –∫
            –ì–æ—à–µ –∏ —Å–ª–æ–∂–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞ –Æ–Ω–æ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –ì–æ—à–µ.
          </p>
          <p style="margin-top: 15px; color: #aaa; font-size: 0.9em">
            –í—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏ —Å–æ–±—ã—Ç–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ä–µ–∞–ª–µ. <br />–õ—é–±–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å
            –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ —Å–ª—É—á–∞–π–Ω–æ.
          </p>
          <button id="btn-accept-disclaimer" class="intro-btn">
            –Ø –ü–†–û–ß–ò–¢–ê–õ
          </button>
        </div>
      </div>

      <!-- 2. –ò–ù–¢–†–û –°–¢–£–î–ò–ò (VLADBER PRESENTS) -->
      <div id="intro-studio" class="intro-screen" style="display: none">
        <div class="studio-logo">
          <span class="studio-name">VLADBER</span>
          <span class="studio-sub">PRESENTS</span>
        </div>
      </div>

      <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
      <div id="main-menu" class="main-menu-layer">
        <!-- –§–æ–Ω–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ -->
        <div class="menu-bg"></div>

        <div class="menu-content">
          <!-- –õ–û–ì–û–¢–ò–ü -->
          <div class="logo-container">
            <div class="logo-top">PROJECT</div>
            <div class="logo-main" data-text="–ì.–û.–®.–ê">–ì.–û.–®.–ê</div>
            <div class="logo-bottom">–õ–ï–ì–ï–ù–î–´</div>
          </div>

          <!-- –ö–ù–û–ü–ö–ò -->
          <div class="menu-buttons">
            <button id="mm-newgame" class="menu-btn" style="--i: 1">
              –ù–∞—á–Ω—ë–º —Å –Ω–∞—á–∞–ª–∞
            </button>
            <button id="mm-load" class="menu-btn" style="--i: 2">
              –ü—Ä–æ–¥–æ–ª–∂–∏–º
            </button>
            <button id="mm-settings" class="menu-btn" style="--i: 3">
              –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
            <button
              id="btn-exit"
              class="menu-btn"
              onclick="exitGameWithAnimation()"
            >
              –ü–æ—à–ª–æ –≤–æ–Ω
            </button>
            <div class="fake-equalizer">
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
            </div>
            <!-- –ü–æ–¥—Å—Ç–∞–≤–∫–∞ -->
            <div class="equalizer-base">
              <span class="base-text">G.O.S.H.A</span>
              <div class="base-line"></div>
            </div>
          </div>

          <!-- –ê–≤—Ç–æ—Ä -->
          <div class="author-text">v1.0.0 by Vladber</div>
        </div>
      </div>

      <!-- –ü–ï–†–°–û–ù–ê–ñ–ò -->
      <div id="characters"></div>

      <!-- –°–ª–æ–π –ö–∞—Ä—Ç—ã -->
      <div id="map-layer" style="display: none">
        <!-- 1. –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞) -->
        <button id="map-back-btn" class="ui-btn">√ó</button>

        <!-- 2. –í–û–¢ –≠–¢–û–ì–û –≠–õ–ï–ú–ï–ù–¢–ê –ù–ï –•–í–ê–¢–ê–ï–¢! -->
        <div id="map-locations"></div>
      </div>

      <!-- –≠–§–§–ï–ö–¢–´ -->
      <div id="vignette-layer"></div>

      <!-- UI –°–õ–û–ô -->
      <div id="ui-layer">
        <div id="dialogue-box">
          <div id="speaker-name"></div>
          <div id="dialogue-text"></div>

          <!-- –ú–µ–Ω—é –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ –¥–∏–∞–ª–æ–≥–∞ -->
          <div id="quick-menu">
            <button id="main-inv-btn" class="ui-btn">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            <button id="map-btn" class="ui-btn">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
            <button id="save-btn" class="ui-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="load-btn" class="ui-btn">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            <button id="settings-btn" class="ui-btn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button id="history-btn" class="ui-btn">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
            <button
              id="btn-dialogue-exit"
              onclick="tryQuitGame()"
              title="–í—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã"
            >
              üö™
            </button>
          </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—ã–±–æ—Ä–æ–≤ -->
        <div id="choices-container"></div>
      </div>

      <!-- –ë–û–ï–í–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
      <div id="battle-layer" style="display: none">
        <!-- 1. –ó–æ–Ω–∞ –í—Ä–∞–≥–∞ -->
        <div id="enemy-area">
          <div id="enemies-container"></div>
          <div id="battle-log-enemy"></div>
        </div>

        <!-- 2. –ó–æ–Ω–∞ –ì–µ—Ä–æ—è -->
        <div id="hero-area">
          <div id="hero-hud">
            <!-- HP Bar -->
            <div class="hp-bar-bg">
              <div id="hero-hp-fill" style="width: 100%"></div>
            </div>
            <div id="hero-hp-text">100/100</div>

            <!-- Stamina Bar -->
            <div class="hp-bar-bg" style="border-color: #aaf; margin-top: 5px">
              <div
                id="hero-stamina-fill"
                style="width: 100%; background: #3498db"
              ></div>
            </div>
            <div style="font-size: 12px; color: #aaf; text-align: center">
              –≠–Ω–µ—Ä–≥–∏—è
            </div>
          </div>

          <!-- 3. –õ–æ–≥ –±–æ—è -->
          <div id="battle-log">–ë–∏—Ç–≤–∞ –Ω–∞—á–∞–ª–∞—Å—å!</div>

          <!-- 4. –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
          <div id="action-buttons">
            <button id="btn-ulti" class="action-btn ulti-btn">üî• –£–õ–¨–¢–ê</button>
            <div class="main-actions">
              <button id="btn-attack" class="action-btn">‚öîÔ∏è –ê—Ç–∞–∫–∞</button>
              <button id="btn-defend" class="action-btn">üõ°Ô∏è –ó–∞—â–∏—Ç–∞</button>
            </div>

            <!-- –í—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é -->
            <div class="dropdown-container">
              <div class="dropdown">
                <button id="btn-actions-menu" class="action-btn small-btn">
                  ‚ö° –î–µ–π—Å—Ç–≤–∏—è ‚ñ≤
                </button>
                <div id="actions-dropdown" class="dropdown-content">
                  <button id="btn-flee">üèÉ –ë–µ–∂–∞—Ç—å</button>
                  <button id="btn-surrender">üè≥Ô∏è –°–¥–∞—Ç—å—Å—è</button>
                </div>
              </div>
              <div class="dropdown">
                <button id="btn-inventory-menu" class="action-btn small-btn">
                  üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ‚ñ≤
                </button>
                <div id="inventory-dropdown" class="dropdown-content">
                  <button id="btn-inv-weapons">–û—Ä—É–∂–∏–µ</button>
                  <button id="btn-inv-potions">–ó–µ–ª—å—è</button>
                  <button id="btn-inv-items">–ü—Ä–µ–¥–º–µ—Ç—ã</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- –ö–æ–Ω–µ—Ü battle-layer -->

      <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ò–ù–í–ï–ù–¢–ê–†–Ø -->
      <div id="inventory-modal" class="modal" style="display: none">
        <div class="modal-content">
          <div
            class="modal-header"
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #444;
              padding-bottom: 10px;
              margin-bottom: 15px;
            "
          >
            <h2 id="inv-title" style="margin: 0; color: #d4af37">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <span
              id="inv-close-btn"
              class="close-btn"
              style="font-size: 30px; cursor: pointer; color: #aaa"
              >&times;</span
            >
          </div>

          <div
            id="inv-stats"
            style="
              display: flex;
              justify-content: space-around;
              background: rgba(0, 0, 0, 0.4);
              padding: 12px;
              margin-bottom: 15px;
              border-radius: 5px;
              font-weight: bold;
              font-size: 16px;
            "
          >
            <!-- –°—é–¥–∞ JS –±—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ç—ã -->
          </div>

          <div
            class="inv-tabs"
            style="display: flex; gap: 10px; margin-bottom: 15px"
          >
            <button
              onclick="openInventory('weapons')"
              class="tab-btn"
              style="
                flex: 1;
                padding: 10px;
                background: #333;
                color: #ccc;
                border: 1px solid #555;
                cursor: pointer;
                border-radius: 4px;
                font-size: 14px;
              "
            >
              ‚öîÔ∏è –û—Ä—É–∂–∏–µ
            </button>
            <button
              onclick="openInventory('potions')"
              class="tab-btn"
              style="
                flex: 1;
                padding: 10px;
                background: #333;
                color: #ccc;
                border: 1px solid #555;
                cursor: pointer;
                border-radius: 4px;
                font-size: 14px;
              "
            >
              üß™ –ó–µ–ª—å—è
            </button>
            <button
              onclick="openInventory('items')"
              class="tab-btn"
              style="
                flex: 1;
                padding: 10px;
                background: #333;
                color: #ccc;
                border: 1px solid #555;
                cursor: pointer;
                border-radius: 4px;
                font-size: 14px;
              "
            >
              üì¶ –†–∞–∑–Ω–æ–µ
            </button>
          </div>

          <div
            id="inv-list"
            style="
              flex-grow: 1;
              overflow-y: auto;
              max-height: 400px;
              padding-right: 5px;
              border-top: 1px solid #444;
              padding-top: 10px;
            "
          >
            <!-- –¢—É—Ç –±—É–¥—É—Ç –ø—Ä–µ–¥–º–µ—Ç—ã -->
          </div>
        </div>
      </div>

      <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–û–•–†–ê–ù–ï–ù–ò–Ø/–ó–ê–ì–†–£–ó–ö–ò -->
      <div id="saveload-modal" class="modal" style="display: none">
        <div class="modal-content" style="width: 700px; max-width: 95%">
          <div
            class="modal-header"
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #444;
              padding-bottom: 15px;
              margin-bottom: 20px;
            "
          >
            <h2 id="saveload-title" style="margin: 0; color: #d4af37">
              –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            </h2>
            <span
              id="saveload-close-btn"
              class="close-btn"
              style="font-size: 30px; cursor: pointer; color: #aaa"
              >&times;</span
            >
          </div>
          <div id="save-slots-grid" class="save-grid">
            <!-- –°–ª–æ—Ç—ã –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
          </div>
        </div>
      </div>

      <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–ê–°–¢–†–û–ï–ö -->
      <div id="settings-modal" class="modal" style="display: none">
        <div class="modal-content" style="width: 400px">
          <div
            class="modal-header"
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #444;
              padding-bottom: 10px;
              margin-bottom: 15px;
            "
          >
            <h2 style="margin: 0; color: #d4af37">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <span
              id="settings-close-btn"
              class="close-btn"
              style="font-size: 30px; cursor: pointer; color: #aaa"
              >&times;</span
            >
          </div>

          <div class="setting-row" style="margin-bottom: 20px">
            <label style="display: block; margin-bottom: 5px; color: #ccc"
              >üîä –ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏:</label
            >
            <input
              type="range"
              id="volume-slider"
              min="0"
              max="100"
              value="50"
              style="width: 100%; cursor: pointer"
            />
          </div>

          <div class="setting-row" style="margin-bottom: 20px">
            <label style="display: block; margin-bottom: 5px; color: #ccc"
              >üé® –°—Ç–∏–ª—å –æ–∫–Ω–∞:</label
            >
            <select
              id="theme-select"
              style="
                width: 100%;
                padding: 8px;
                background: #333;
                color: white;
                border: 1px solid #555;
                border-radius: 4px;
              "
            >
              <option value="default">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</option>
              <option value="retro">–†–µ—Ç—Ä–æ</option>
              <option value="glass">–°—Ç–µ–∫–ª–æ</option>
              <option value="gold">–ó–æ–ª–æ—Ç–æ</option>
              <option value="cyber">–ù–µ–æ–Ω</option>
              <option value="yandere">–î–Ω–µ–≤–Ω–∏–∫ –ë—É–¥—É—â–µ–≥–æ</option>
            </select>
          </div>
        </div>
      </div>

      <div id="qte-layer"></div>
      <div id="damage-overlay"></div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–∞–º–æ–≥–æ –æ–∫–Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ -->
      <div id="history-modal" class="modal-overlay" style="display: none">
        <div class="modal-content history-content">
          <div class="modal-header">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤</h3>
            <span id="history-close-btn" class="close-btn">&times;</span>
          </div>
          <div id="history-log-container">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Ç–µ–∫—Å—Ç -->
          </div>
        </div>
      </div>

      <!-- –û–í–ï–†–õ–ï–ô –î–õ–Ø –≠–§–§–ï–ö–¢–ê –í–´–ö–õ–Æ–ß–ï–ù–ò–Ø (CRT) -->
      <div id="crt-overlay" class="crt-off-layer"></div>

      <!-- –û–∫–Ω–æ –æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ -->
      <div id="inspect-modal" class="modal" style="display: none">
        <div class="inspect-content">
          <h2 id="inspect-title">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞</h2>
          <div id="inspect-img-container">
            <!-- –°—é–¥–∞ JS –≤—Å—Ç–∞–≤–∏—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É -->
          </div>
          <p id="inspect-desc">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞...</p>

          <div class="inspect-actions">
            <button id="btn-inspect-take" class="ui-btn">–í–∑—è—Ç—å</button>
            <button id="btn-inspect-close" class="ui-btn">–ù–∞–∑–∞–¥</button>
          </div>
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—à–µ–∫ (Toasts) -->
      <div id="toast-container"></div>

      <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (Confirm) -->
      <div id="custom-confirm" class="confirm-overlay" style="display: none">
        <div class="confirm-box">
          <p id="confirm-message">–£–≤–µ—Ä–µ–Ω?</p>
          <div class="confirm-buttons">
            <button id="confirm-yes" class="ui-btn gold-btn">–ö–æ–Ω–µ—á–Ω–æ</button>
            <button id="confirm-no" class="ui-btn red-btn">–ü–æ—à—ë–ª –≤–æ–Ω</button>
          </div>
        </div>
      </div>

      <!-- –°–ö–†–ò–ü–¢–´ -->
      <script src="data.js"></script>
      <script src="engine.js"></script>
      <script src="battle.js"></script>
      <script src="game.js"></script>
      <script src="macros.js"></script>
      <script src="story.js"></script>
      <script src="prologue.js"></script>
    </div>
  </body>
</html>
